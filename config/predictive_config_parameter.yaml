# Simulation mode
simulation_mode: false             # Is set in launch file!
gazebo_simulation: false

### Kinematic configuration parameter

# Debug mode
activate_output: true
activate_debug_output: true
activate_controller_node_output: true
plotting_result: true

# Clock frequency //hz
clock_frequency: 20

#Optimal control problem dimensions
state_dim: 5
control_dim: 2

# Input and output topics
publish:
    cmd:          '/carla/ego_vehicle/vehicle_control_cmd'
    cmd_sim:      '/prius'
robot_state_topic: '/carla/ego_vehicle/odometry'
obs_state_topic: '/ellipse_objects_feed'
waypoint_topic: '/path_publisher/path' 

# Kinematic chain parameter
robot_base_link: ego_vehicle
target_frame: map # world fixed frame but will be changed according to robot_state_topic
global_path_frame: local_car

# Weight on the slack variable for collision collision
slack_weight: 10000
repulsive_weight: 0.1
reference_velocity: 2.0
initial_speed: 0.0

# Parameters for predefined reference path
global_path:
  x: [12.0307, 17.0307, 22.0307, 27.0307, 32.0307, 37.0307, 42.0307, 47.0307, 52.0307, 57.0307, 62.0307, 67.0306, 72.0306, 77.0306, 81.3769, 85.3607, 87.9236, 88.3714, 88.3721, 88.3728, 88.3736, 88.3744, 88.3751, 88.3759, 88.3766, 88.3773, 88.3781, 88.3787, 88.3794, 88.3802, 88.3808, 88.3816, 88.3823, 88.3831, 88.3839, 88.3846, 88.3854, 88.3861, 88.3869, 88.3877, 88.3884, 89.2396, 92.8445, 98.5701, 103.419, 108.419, 113.419, 118.419, 123.419, 128.419, 133.419, 138.419, 143.419, 148.419, 153.419, 158.419, 163.419, 168.419, 173.419, 178.419, 183.419, 188.419, 193.419, 198.419, 203.419, 208.419, 213.419, 218.419, 223.419, 228.419, 233.419, 238.419, 243.419, 248.419, 253.419, 258.419, 263.419, 268.419, 273.419, 278.419, 283.419, 288.419, 293.419, 298.419, 303.419, 308.419, 313.419, 318.419, 323.419, 327.635, 331.443, 334.047, 334.815, 334.813, 334.81, 334.806, 334.803, 334.8, 334.797, 334.794, 334.791, 334.788, 334.786, 334.783, 334.78, 334.777, 334.775, 334.772, 334.769, 334.766, 334.763, 334.76, 334.757, 334.754, 334.751, 334.748, 334.745, 334.742, 334.739, 334.736]
  y: [-1.97967, -1.97804, -1.97641, -1.97479, -1.97316, -1.97153, -1.9699, -1.96827, -1.96664, -1.96501, -1.96338, -1.96175, -1.96012, -1.95849, -1.95707, -2.61581, -5.10816, -9.17007, -13.6673, -18.6673, -23.6673, -28.6673, -33.6673, -38.6673, -43.6673, -48.154, -53.154, -57.154, -62.154, -67.154, -71.154, -76.154, -81.154, -86.154, -91.154, -96.154, -101.154, -106.154, -111.154, -116.154, -120.836, -126.491, -131.293, -133.398, -133.416, -133.418, -133.42, -133.423, -133.425, -133.427, -133.429, -133.431, -133.434, -133.436, -133.438, -133.44, -133.443, -133.445, -133.447, -133.449, -133.452, -133.454, -133.456, -133.458, -133.46, -133.463, -133.465, -133.467, -133.469, -133.472, -133.474, -133.476, -133.478, -133.481, -133.483, -133.485, -133.487, -133.49, -133.492, -133.494, -133.496, -133.498, -133.501, -133.503, -133.505, -133.507, -133.51, -133.512, -133.514, -133.516, -134.368, -137.131, -141.06, -144.665, -149.665, -154.665, -159.665, -164.665, -169.665, -174.665, -179.665, -185.651, -189.041, -194.041, -198.098, -203.098, -207.651, -212.156, -217.156, -222.156, -227.156, -232.156, -237.156, -242.156, -247.156, -252.156, -257.156, -262.156, -267.156, -272.156]
  theta: [0.000325971, 0.000325971, 0.000325971, 0.000325971, 0.000325971, 0.000325971, 0.000325971, 0.000325971, 0.000325971, 0.000325971, 0.000325971, 0.000325971, 0.000325971, 0.000325971, 0.00032591, -0.457211, -1.13436, -1.57064, -1.57064, -1.57064, -1.57064, -1.57064, -1.57064, -1.57064, -1.57064, -1.57064, -1.57064, -1.57064, -1.57064, -1.57064, -1.57064, -1.57064, -1.57064, -1.57064, -1.57064, -1.57064, -1.57064, -1.57064, -1.57064, -1.57064, -1.57064, -1.18834, -0.650206, -0.0544569, -0.000446794, -0.000446794, -0.000446794, -0.000446794, -0.000446794, -0.000446794, -0.000446794, -0.000446794, -0.000446794, -0.000446794, -0.000446794, -0.000446794, -0.000446794, -0.000446794, -0.000446794, -0.000446794, -0.000446794, -0.000446794, -0.000446794, -0.000446794, -0.000446794, -0.000446794, -0.000446794, -0.000446794, -0.000446794, -0.000446794, -0.000446794, -0.000446794, -0.000446794, -0.000446794, -0.000446794, -0.000446794, -0.000446794, -0.000446794, -0.000446794, -0.000446794, -0.000446794, -0.000446794, -0.000446794, -0.000446794, -0.000446794, -0.000446794, -0.000446794, -0.000446794, -0.000446794, -0.000446794, -0.521397, -1.09677, -1.5714, -1.5714, -1.5714, -1.5714, -1.5714, -1.5714, -1.5714, -1.5714, -1.5714, -1.5714, -1.5714, -1.5714, -1.5714, -1.5714, -1.5714, -1.5714, -1.5714, -1.5714, -1.5714, -1.5714, -1.5714, -1.5714, -1.5714, -1.5714, -1.5714, -1.5714, -1.5714, -1.5714]
  n_points_clothoid: 20
  n_points_spline: 20

#Road parameters
road_width_right: 2.15
road_width_left: 5.125

# Parameters for collision constraints
obstacles:
      n_obstacles: 2
      sub_ellipse_topic: ellipse_objects_feed
      n_discs: 3
      ego_l: 4.540
      ego_w: 2.250

constraints:
     velocity_constraints:
           min: [0]
           max: [13.8]
     #orientation_constraints:

acado_config:
     max_num_iteration: 70
     kkt_tolerance: 1e-3
     integrator_tolerance: 1e-3
     start_time_horizon: 0.0
     end_time_horizon: 5.0 # 5.0  # control and prediction horizon
     discretization_intervals: 50
     sampling_time: 0.05
     weight_factors:
           contour_weight_factors:
                #Wcontour and Wlag
                [0.1, 0.1]
           control_weight_factors:
                # Wa and Wdelta
                [1.0, 4.0]
                
